---
title: TypeScript
---

# TypeScript

Theme UI is written in TypeScript.

While most APIs in Theme UI should _just work_ in TypeScript,
there are a few advanced use cases which will differ slightly.
This guide is intended to cover those use cases.

## Extending the Theme

If you need additional properties in the theme object,
you can add them with [module augmentation](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation).

```tsx
import { makeTheme, UserTheme } from '@theme-ui/css';

interface MyTheme {
  colors: {
    primary: string;
    'primary-dark': string;
    'primary-light': string;
  }
}

declare module '@theme-ui/css' {
  interface UserTheme extends MyTheme {}
}

const theme = makeTheme({
  colors: {
    primary: 'red',
    'primary-dark': 'darkred',
    'primary-light': 'pink'
  },
})
```

theme-ui's `Theme` interface will automatically pick up customizations to
`UserTheme` so you will be free to reference your custom properties:

```tsx
import { css } from '@theme-ui/css';

// using css function
const primaryDarkColor = css({
  color: 'primary-dark' // auto-completes and no error
})

// using jsx pragma
const H2 = () => <h2 sx={{ color: 'primary' }}>primary heading</h2>
````

## Accessing optional properties

Because all default properties of `Theme` are optional,
accessing them requires the usage of a [`get` function](/api#get).

```tsx
import { Theme } from 'theme-ui'

const theme: Theme = {
  space: [0, 8, 16, 32, 64, 128, 256],
  sizes: [0, 8, 16, 32, 64, 128, 256],
}

// Type error on `theme.space` and `theme.sizes`.
// Object is possibly 'undefined'.ts(2532)
return <div sx={{ size: (t) => t.space[3] + t.sizes[5] }} />
```

```tsx
import { get } from 'theme-ui'

// No error
return <div sx={{ size: (t) => get(t, 'space.3') + get(t, 'sizes.5') }} />
```

Properties of scales can be accessed with optional chaining.
Values under numeric keys can be accessed with bracket notation.

```tsx
const parse = (x: unknown) => parseInt(String(x))

return (
  <div sx={{
    size: size: (t) => parse(t.space?.[3]) + parse(t.sizes?.[5]) }}
  />
)
```

_[Try it on CodeSandbox.](https://codesandbox.io/s/theme-ui-typescript-tips-yh8u1?file=/src/App.tsx)_

_[Try it in TypeScript Playground.](https://www.typescriptlang.org/v2/en/play?#code/JYWwDg9gTgLgBAbzgFQBYFMTrgXzgMyghDgHIYMsBaAV2FIG4AoJ4AOxnSnwEMBjbAFkAngGVhHHgA8AEsADmqADYLUMdvLSZsCJnALR08ojTYATAFxwAzjCgbmOFmfR8lPKNhAQzNJdnJKdFp6RD04dk5ufmwtLDD9fWsJGGk5RRVFdTZ5KxFxSVlVTLUNOPRwpycmPgg2WzgKbStyuABeBJsUtOLVbNzO-XxDYwhTSzIAYgAmWdIAGkqmHGYauobkwvTlPo12xqCAOk3UoozdnLX6+C4iKH2mrGPhGDYe86yNJiA)_

## Common Problems

### Union types are not inferred without explicit annotation

Style objects defined outside of `css` function and `sx` prop need explicit
annotation to prevent following error.

```tsx
const style = { whiteSpace: 'pre-line' }

// Type '{ whiteSpace: string; }' is not assignable to type 'ThemeUICSSObject'.
// Type 'string' is not assignable to type '"inherit" | "initial" | "revert" | "unset" | "normal" | "break-spaces"
return <div sx={style} />
```

_[Try it on CodeSandbox.](https://codesandbox.io/s/theme-ui-inferrence-too-wide-vkrf5?file=/src/index.tsx&view=editor&previewwindow=tests)_

TypeScript assumes that `whiteSpace` here is a `string`, but the `whiteSpace`
property in `ThemeUICSSObject` is a union of possible white-space values
([see on MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space#Values))
or a nested style object.

We can explicitly annotate `style` ensure that it is a correct Theme UI style
object and that `whiteSpace` is one of appropriate values.

```tsx
import { ThemeUICSSObject } from 'theme-ui'

const style: ThemeUICSSObject = { whiteSpace: 'pre-line' }

// No error
return <div sx={style} />
```

_[Try it on CodeSandbox.](https://codesandbox.io/s/theme-ui-inferrence-too-wide-vkrf5?file=/src/index.tsx&view=editor&previewwindow=tests)_

We could also fix our problem by narrowing the type of `style` with a
[const assertion](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions).

```tsx
const style = { whiteSpace: 'pre-line' } as const
```

This is succinct, but error prone, because we won't get TS intellisense support inside of this object.
